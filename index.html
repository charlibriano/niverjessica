<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Carta para J√©ssica üíå</title>
<meta name="theme-color" content="#ff4d6d">

<style>
  :root{
    --bg:#0f0f12; --card:#15151b; --paper:#fff7f9; --accent:#ff4d6d;
    --ink:#2b2b2b; --muted:#b9b9c3; --text:#f7f7fb;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
    color:var(--text);
    background:
      radial-gradient(1200px 700px at -10% -10%, #1c1420 0, transparent 60%),
      radial-gradient(1200px 700px at 110% 10%, #12202c 0, transparent 55%),
      var(--bg);
    display:flex; align-items:center; justify-content:center; padding:20px;
    min-height:100svh; /* robusto em celular */
  }
  .wrap{width:min(980px,100%);}

  /* CAPA */
  .capa{
    position:relative; background:linear-gradient(180deg,#ff7b94,#ff4d6d);
    border-radius:22px; box-shadow:0 15px 40px rgba(0,0,0,.35);
    padding:28px; display:grid; place-items:center; aspect-ratio:16/9; overflow:hidden;
  }
  .flap{
    position:absolute; left:0; right:0; top:0; height:52%;
    background:linear-gradient(180deg,#ffc7d1,#ff8aa1);
    clip-path:polygon(0 0,100% 0,50% 100%);
    transform-origin:50% 0; transition:transform .9s cubic-bezier(.22,1,.36,1);
    box-shadow:0 12px 30px rgba(0,0,0,.35);
  }
  .selo{
    position:absolute; left:50%; top:48%; transform:translate(-50%,-50%);
    background:#ffd6de; color:#a2263b; border-radius:999px; padding:10px 16px;
    font-weight:800; letter-spacing:.04em; box-shadow:0 6px 18px rgba(0,0,0,.25);
  }
  .cta{
    position:relative; z-index:2; appearance:none; border:none; cursor:pointer;
    background:#fff; color:#a2263b; font-weight:900; font-size:1.1rem;
    padding:14px 20px; border-radius:14px; box-shadow:0 10px 20px rgba(0,0,0,.25);
  }

  /* BOT√ÉO FALLBACK (sempre vis√≠vel) */
  .fallback-open{
    position:fixed; left:16px; bottom:16px; z-index:50;
    background:var(--accent); color:#fff; border:none; border-radius:12px;
    padding:10px 14px; font-weight:800; cursor:pointer;
  }

  /* CARTA */
  .carta{
    display:none; grid-template-columns:1fr 380px; gap:24px;
    background:linear-gradient(180deg,rgba(255,77,109,.08),transparent 30%), var(--card);
    border-radius:22px; box-shadow:0 15px 40px rgba(0,0,0,.35); padding:22px; animation:fade .6s both;
  }
  @media (max-width: 920px){ .carta{grid-template-columns:1fr} }
  @keyframes fade{ from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:none} }

  .hero{
    position:relative; border-radius:18px; overflow:hidden;
    border:1px solid rgba(255,255,255,.08); aspect-ratio:16/10; background:#111;
  }
  .hero img{ width:100%; height:100%; object-fit:cover; display:block; filter:saturate(1.05) contrast(1.05); }

  .letter{
    background:linear-gradient(#fff,#fff7f9); color:var(--ink);
    border-radius:18px; padding:22px; box-shadow:inset 0 1px 0 rgba(0,0,0,.06);
  }
  .letter h2{ margin:0 0 12px; color:#a2263b }
  .letter p{ margin:0 0 12px; line-height:1.65 }
  .meta{ display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; font-size:.92rem; color:#555 }
  .pill{ background:#ffe8ee; border:1px solid #ffd6de; border-radius:999px; padding:6px 10px }

  .player{
    background:rgba(255,255,255,.02); border:1px solid rgba(255,255,255,.06);
    border-radius:18px; padding:16px; display:flex; flex-direction:column; gap:12px; margin-top:14px;
  }
  .track{ display:flex; gap:12px; align-items:center }
  .art{ width:64px; height:64px; border-radius:14px; overflow:hidden; border:1px solid rgba(255,255,255,.08) }
  .art img{ width:100%; height:100%; object-fit:cover }
  .tinfo strong{ font-size:1rem; color:#fff } .tinfo span{ font-size:.9rem; color:#cfcfe3 }

  .btn{ appearance:none; border:none; cursor:pointer; padding:12px 14px; border-radius:12px; font-weight:800 }
  .btn.primary{ background:var(--accent); color:#fff }
  .hint{ color:var(--muted); font-size:.9rem }

  /* cora√ß√µes */
  .heart{ position:fixed; bottom:-20px; font-size:20px; opacity:.85; animation:float 6s linear forwards; pointer-events:none }
  @keyframes float{ to{ transform:translateY(-120vh) translateX(var(--x)); opacity:0 } }

  footer{ text-align:center; color:#bdbdcc; font-size:.85rem; margin-top:10px }
</style>
</head>
<body>
  <!-- Fallback: se algo travar na capa, este bot√£o abre a carta -->
  <button id="fallback" class="fallback-open" aria-controls="carta">Abrir carta</button>

  <div class="wrap">

    <!-- CAPA -->
    <section id="capa" class="capa" aria-label="Envelope">
      <div class="flap" id="flap"></div>
      <div class="selo">üíå</div>
      <button id="abrir" class="cta" aria-controls="carta">Abrir carta</button>
    </section>

    <!-- CARTA -->
    <section id="carta" class="carta" aria-label="Carta de anivers√°rio" hidden>
      <div class="letter">
        <h2>Para J√©ssica ‚ù§Ô∏è</h2>
        <p><strong>Meu amor,</strong> hoje celebro sua vida e agrade√ßo a Deus por voc√™. Que Ele te envolva com carinho, cuide dos seus passos e fa√ßa florescer cada sonho do seu cora√ß√£o. Eu te amo ‚Äî ontem, hoje e sempre.</p>
        <p><em>‚ÄúMulher virtuosa, quem a achar√°? O seu valor muito excede o de rubis.‚Äù</em> (Prov√©rbios 31:10)</p>
        <div class="meta">
          <span class="pill">Para: <strong>J√©ssica</strong></span>
          <span class="pill">De: <strong>Seu marido</strong></span>
        </div>
        <div style="margin-top:14px;display:flex;gap:8px;flex-wrap:wrap">
          <button id="tocar" class="btn primary">‚ñ∂ Tocar m√∫sica</button>
          <button id="pausar" class="btn">‚è∏ Pausar</button>
          <div class="hint">Em celulares, a m√∫sica s√≥ come√ßa ap√≥s um toque.</div>
        </div>
      </div>

      <div>
        <figure class="hero"><img src="assets/imagem_cartao.png" alt="Foto especial" /></figure>

        <aside class="player" aria-label="M√∫sica do cart√£o">
          <div class="track">
            <div class="art"><img src="assets/imagem_cartao.png" alt="Capa" /></div>
            <div class="tinfo">
              <strong>Todo dia, at√© morrer</strong>
              <span>Rodolfo Abrantes & O Muro de Pedra</span>
            </div>
          </div>
          <audio id="audio" preload="auto">
            <source src="assets/musica.mp3" type="audio/mpeg">
          </audio>
        </aside>
      </div>
    </section>

    <footer>Feito com amor ‚ù§Ô∏è</footer>
  </div>

<script>
  const capa   = document.getElementById('capa');
  const carta  = document.getElementById('carta');
  const abrir  = document.getElementById('abrir');
  const flap   = document.getElementById('flap');
  const fallback = document.getElementById('fallback');

  const audio  = document.getElementById('audio');
  const tocar  = document.getElementById('tocar');
  const pausar = document.getElementById('pausar');

  function spawnHearts(){
    const qty=18;
    for(let i=0;i<qty;i++){
      const h=document.createElement('div');
      h.className='heart';
      h.textContent=['üíñ','‚ù§Ô∏è','üíò','üíó'][i%4];
      h.style.left=Math.random()*100+'vw';
      h.style.setProperty('--x',(Math.random()*140-70)+'vw');
      h.style.animationDelay=(Math.random()*1.2)+'s';
      document.body.appendChild(h);
      setTimeout(()=>h.remove(),7000);
    }
  }

  async function abrirCarta(){
    // Anima a aba do envelope
    flap.style.transform='rotateX(155deg)';
    setTimeout(()=>{
      capa.style.display='none';
      carta.hidden=false;
      carta.style.display='grid';
      spawnHearts();
    }, 650);

    // Tenta tocar a m√∫sica j√° nesse clique (permitido pelos navegadores)
    try{ await audio.play(); }catch(e){ /* em mobile pode precisar tocar no bot√£o */ }
  }

  // Liga√ß√µes
  abrir.addEventListener('click', abrirCarta);
  fallback.addEventListener('click', abrirCarta);

  tocar.addEventListener('click', async ()=>{
    try{ await audio.play(); }catch(e){}
  });
  pausar.addEventListener('click', ()=>{
    if(audio.paused){ audio.play(); pausar.textContent='‚è∏ Pausar'; }
    else{ audio.pause(); pausar.textContent='‚ñ∂ Tocar'; }
  });

  audio.addEventListener('ended', ()=>{ pausar.textContent='‚ñ∂ Tocar'; });
</script>

<noscript>
  <style>.capa{display:none}.carta{display:block}</style>
  <div style="max-width:700px;margin:20px auto;background:#fff;padding:16px;border-radius:10px;color:#000">
    Ative o JavaScript para ver a anima√ß√£o da carta e ouvir a m√∫sica.
  </div>
</noscript>
</body>
</html>
